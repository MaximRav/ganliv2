<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="navibar.css" />
  <link rel="stylesheet" href="ganimlist.css" />

  <title>Ganim list</title>
</head>

<body>
  <header>
    <bar>
      <ul>
        <li><a href="/selfPage" id="selfPageLink">אזור אישי</a></li>
        <li><a href="/ganimlist.html">גנים</a></li>
        <li><a href="/aboutPage.html">אודות</a></li>
        <li><a href="/HomeLog.html">בית</a></li>
        <li><a href="/HomeLog.html" class="logo">גן-לי</a></li>
        <li>
          <a href="/logout" class="login" id="logoutLink">התנתקות</a>
        </li>
      </ul>
    </bar>
  </header>

  <h1 class="ganListLogo">צעד קטן לאדם וצעד ענק לאנושות</h1>

  <table class="ganimList">
    <tr class="ganimHader">
      <th>דירוג</th>
      <th>כתובת</th>
      <th>אופי הגן</th>
      <th>שם הגן</th>
    </tr>

  </table>


  <div class="sortList">
    <div class="sortHader">
      <h3>:מיון לפי</h3>
    </div>
    <ul>
      <li>
        <h4>אופי הגן</h4>
        <ul class="sort1">
          <li>
            <input type="radio" id="dati" name="gardenType">
            <label for="dati">דתי</label>
          </li>
          <li>
            <input type="radio" id="hiloni" name="gardenType">
            <label for="hiloni">חילוני</label>
          </li>
          <li>
            <input type="radio" id="mamlachti" name="gardenType">
            <label for="mamlachti">ממלכתי</label>
          </li>
        </ul>
      </li>
      <li>
        <h4>שכונה</h4>
        <ul class="sort2">
          <li>
            <input type="radio" id="neighborhoodA" name="neighborhood">
            <label for="neighborhoodA">שכונה א</label>
          </li>
          <li>
            <input type="radio" id="neighborhoodB" name="neighborhood">
            <label for="neighborhoodB">שכונה ב</label>
          </li>
          <li>
            <input type="radio" id="neighborhoodC" name="neighborhood">
            <label for="neighborhoodC">שכונה ג</label>
          </li>
        </ul>
      </li>
      <li>
        <h4>דירוג</h4>
        <ul class="sort3">
          <li>
            <input type="radio" id="rating1" name="rating">
            <label for="rating1">כוכבים</label>
          </li>
          <li>
            <input type="radio" id="rating2" name="rating">
            <label for="rating2">כוכבים</label>
          </li>
          <li>
            <input type="radio" id="rating3" name="rating">
            <label for="rating3">כוכבים</label>
          </li>
        </ul>
      </li>
    </ul>
  </div>

  <script>
    // Fetch the list of approved gans
    fetch('/gans/approved')
      .then(response => response.json())
      .then(data => {
        const ganimList = document.querySelector('.ganimList');
        data.forEach(gan => {
          const row = document.createElement('tr');
          row.innerHTML = `
            <td>${gan.rating}</td>
            <td>${gan.address}</td>
            <td>${gan.character}</td>
            <td><a href="/gan/${gan._id}">${gan.ganName}</a></td>
          `;
          ganimList.appendChild(row);
        });
      })
      .catch(error => {
        console.error('Error fetching approved gans:', error);
      });

    fetch('/profile')
      .then(response => response.json())
      .then(data => {
        const userRole = data.role;
        const selfPageLink = document.getElementById('selfPageLink');

        // Update the selfPageLink based on the user's role
        if (userRole === 'הורה') {
          selfPageLink.href = '/selfPageP.html';
        } else if (userRole === 'גננת') {
          selfPageLink.href = '/selfPageG.html';
        } else if (userRole === 'admin') {
          selfPageLink.href = '/selfPageA.html';
        }
      })
      .catch(error => {
        console.error('Error fetching user role:', error);
      });
  </script>
</body>

</html>